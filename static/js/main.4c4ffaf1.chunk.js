(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(10),s=n.n(c),i=n(2),r=n(3),d=n(4),u=n(40),l=n(6),h=n(7),p=function(){function e(){Object(l.a)(this,e),this.queue=void 0,this.queue=[]}return Object(h.a)(e,[{key:"front",value:function(){if(0!==this.queue.length)return this.queue[0]}},{key:"pop",value:function(){return this.queue.shift()}},{key:"push",value:function(e){this.queue.push(e)}},{key:"empty",value:function(){return 0===this.queue.length}}]),e}(),f=function(){function e(){Object(l.a)(this,e),this.stack=void 0,this.stack=[]}return Object(h.a)(e,[{key:"top",value:function(){if(0!==this.stack.length)return this.stack[0]}},{key:"pop",value:function(){return this.stack.shift()}},{key:"push",value:function(e){this.stack.unshift(e)}},{key:"empty",value:function(){return 0===this.stack.length}}]),e}();function v(e,t){return e<=t}var j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;Object(l.a)(this,e),this.pQueue=void 0,this.compare=void 0,this.pQueue=[],this.compare=t}return Object(h.a)(e,[{key:"getPos",value:function(e,t,n){for(;t<=n;){if(t===n)return this.compare(e,this.pQueue[t])?t:t+1;var o=Math.floor((t+n)/2);this.compare(e,this.pQueue[o])?n=o-1:t=o+1}return 0}},{key:"front",value:function(){if(0!==this.pQueue.length)return this.pQueue[0]}},{key:"pop",value:function(){return this.pQueue.shift()}},{key:"push",value:function(e){var t=this.getPos(e,0,this.pQueue.length-1);this.pQueue.splice(t,0,e)}},{key:"empty",value:function(){return 0===this.pQueue.length}}]),e}(),b=function(e,t){if(e.rootID){console.log("Starting BFS");var n=new p;n.push(e.rootID);for(var o={},a=0,c=function(){var c=n.pop();console.log(c);var s=e.nodes[c];o[s.id]=!0,setTimeout((function(){t(Object(i.a)(Object(i.a)({},s),{},{visited:!0}))}),a),a+=300,e.nodes[s.id].connections.forEach((function(c){var s=e.nodes[c.nodeID];o[c.nodeID]||(n.push(c.nodeID),setTimeout((function(){t(Object(i.a)(Object(i.a)({},s),{},{state:"touched"}))}),a))}))};!n.empty();)c();console.log("BFS finished")}else console.log("Root is not set")},g=function(e,t){if(e.rootID){console.log("Starting DFS");var n=new f;n.push(e.rootID);for(var o={},a=0,c=function(){var c=n.pop();console.log(c);var s=e.nodes[c];o[s.id]=!0,setTimeout((function(){t(Object(i.a)(Object(i.a)({},s),{},{visited:!0}))}),a),a+=300,e.nodes[s.id].connections.forEach((function(c){var s=e.nodes[c.nodeID];o[c.nodeID]||(n.push(c.nodeID),setTimeout((function(){t(Object(i.a)(Object(i.a)({},s),{},{state:"touched"}))}),a))}))};!n.empty();)c();console.log("DFS finished")}else console.log("Root is not set")},O=function(e,t,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=function(a){var c=e[a];setTimeout((function(){n(Object(i.a)(Object(i.a)({},t.paths[c]),{},{state:"travel"}))}),o),o+=300},c=e.length-1;c>=0;c--)a(c)},y=function(e,t,n){if(e.rootID){console.log("Starting Dijkstra");var o={},a={},c=new j((function(e,t){return e.cost<=t.cost})),s={};s[e.rootID]={pathID:null,parentID:null},Object.values(e.nodes).forEach((function(e){o[e.id]=1/0})),o[e.rootID]=0,c.push({cost:0,nodeID:e.rootID});for(var r=0,d=function(){var n=c.pop();console.log(e.nodes[n.nodeID].data);var d=e.nodes[n.nodeID];if(a[n.nodeID]=!0,setTimeout((function(){t(Object(i.a)(Object(i.a)({},d),{},{visited:!0}))}),r),r+=300,e.destinationID===n.nodeID)return"break";e.nodes[n.nodeID].connections.forEach((function(u){var l,h=null!==(l=e.paths[u.pathID].weight)&&void 0!==l?l:0;!a[u.nodeID]&&o[u.nodeID]>n.cost+h&&(o[u.nodeID]=n.cost+h,c.push({cost:o[u.nodeID],nodeID:u.nodeID}),setTimeout((function(){t(Object(i.a)(Object(i.a)({},d),{},{state:"touched"}))}),r),s[u.nodeID]={parentID:n.nodeID,pathID:u.pathID})}))};!c.empty();){if("break"===d())break}if(e.destinationID){for(var u=e.destinationID,l=[];u;){var h=s[u];if(!h){console.log("Can't reach ",u);break}h.pathID&&l.push(h.pathID),u=h.parentID}O(l,e,n,r)}Object.keys(o).forEach((function(t){console.log(e.nodes[t].data,o[t])})),console.log("Dijkstra finished")}else console.log("Root is not set")},x=function(e,t,n,o){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=e,s=[];;){var r=t[c];if(s.push(r.pathID),!r.parentID)break;if((c=r.parentID)===e)break}console.log("Negative weighted cycle detected"),s.forEach((function(e){e&&(console.log(n.nodes[n.paths[e].sourceId].data,n.nodes[n.paths[e].destinationId].data,"negative cycle"),setTimeout((function(){o(Object(i.a)(Object(i.a)({},n.paths[e]),{},{state:"warn"}))}),a),a+=300)}))},D=function(e,t){if(e.rootID){console.log("Starting Bellmanford");var n={},o={},a=0,c=[];Object.keys(e.paths).forEach((function(e){return c.push(e)})),Object.keys(e.nodes).forEach((function(e){return n[e]=1/0})),n[e.rootID]=0;for(var s=Object.keys(e.nodes).length,r=c.length,d=0;d<s-1;d++)for(var u=function(s){var r,d,u=e.paths[c[s]];(setTimeout((function(){t(Object(i.a)(Object(i.a)({},e.paths[u.id]),{},{state:"touched"}))}),a),a+=20,n[u.destinationId]>n[u.sourceId]+(null!==(r=u.weight)&&void 0!==r?r:0))&&(n[u.destinationId]=n[u.sourceId]+(null!==(d=u.weight)&&void 0!==d?d:0),o[u.destinationId]={parentID:u.sourceId,pathID:u.id});setTimeout((function(){t(Object(i.a)(Object(i.a)({},e.paths[u.id]),{},{state:"default"}))}),a),a+=20},l=0;l<r;l++)u(l);if(e.destinationID){for(var h=e.destinationID,p={},f=[],v=!1;h;){var j=o[h];if(!j){console.log("Can't reach ",h);break}if(p[h]){x(h,o,e,t,a),v=!0;break}p[h]=!0,j.pathID&&f.push(j.pathID),h=j.parentID}v||O(f,e,t,a)}console.log("Costs : ",n),Object.keys(n).forEach((function(t){console.log(e.nodes[t].data,n[t])})),console.log("Bellmanford finished")}else console.log("Root is not set")},I=function(e,t,n,o){console.log("Starting Grouping");var a={},c=0,s=-1;Object.values(e.nodes).forEach((function(r){if(!a[r.id]){if(0===r.connections.length)return setTimeout((function(){o(Object(i.a)(Object(i.a)({},r),{},{state:"grouped",group:{id:"-1",color:n}}))}),c),void(c+=150);++s;var d=t[s%t.length],u=new p;u.push(r.id);for(var l=function(){var t=u.pop();console.log(t);var n=e.nodes[t];a[n.id]=!0,setTimeout((function(){o(Object(i.a)(Object(i.a)({},n),{},{state:"grouped",group:{id:""+s,color:d}}))}),c),c+=150,e.nodes[n.id].connections.forEach((function(t){var n=e.nodes[t.nodeID];a[t.nodeID]||(u.push(t.nodeID),setTimeout((function(){o(Object(i.a)(Object(i.a)({},n),{},{state:"touched"}))}),c))}))};!u.empty();)l()}})),console.log("Grouping finished")},k="ADD_NODE",m="UPDATE_NODE",N="ADD_PATH",C="SET_ROOT",w="UNVISIT_ALL",S="UPDATE_PATH",M="SET_DESTINATION",T=function(e){return{type:m,payload:{updatedNode:e}}},E=(n(30),n(1)),P=function(e){var t="checkbox-input";return e.isChecked&&(t+=" checkbox-on"),Object(E.jsx)("div",{className:t,onClick:e.onClick})},R=(n(32),function(){return Object(E.jsx)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(E.jsx)("path",{d:"M16.7688 14.6976L13.4582 11.3876C13.3088 11.2382 13.1062 11.1552 12.8937 11.1552H12.3525C13.2689 9.9832 13.8135 8.50913 13.8135 6.90558C13.8135 3.09091 10.7221 0 6.90676 0C3.09144 0 0 3.09091 0 6.90558C0 10.7202 3.09144 13.8112 6.90676 13.8112C8.51058 13.8112 9.98491 13.2667 11.1571 12.3504V12.8915C11.1571 13.104 11.2401 13.3065 11.3895 13.4559L14.7001 16.7659C15.0122 17.078 15.517 17.078 15.8258 16.7659L16.7655 15.8264C17.0776 15.5143 17.0776 15.0097 16.7688 14.6976ZM6.90676 11.1552C4.55912 11.1552 2.65644 9.25613 2.65644 6.90558C2.65644 4.55834 4.5558 2.65599 6.90676 2.65599C9.25439 2.65599 11.1571 4.55502 11.1571 6.90558C11.1571 9.25281 9.25771 11.1552 6.90676 11.1552Z",fill:"#26408B"})})});var L=function(e){var t,n,a,c,s=Object(o.useState)(""),i=Object(r.a)(s,2),d=i[0],u=i[1],l=Object(o.useState)(!1),h=Object(r.a)(l,2),p=h[0],f=h[1],v=Object(o.createRef)(),j=Object(o.createRef)();a=j,c=function(){p&&f(!1)},Object(o.useEffect)((function(){var e=function(e){var t;(null===(t=a.current)||void 0===t?void 0:t.contains)&&!a.current.contains(e.target)&&c()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a]),Object(o.useEffect)((function(){var e;p&&(null===(e=v.current)||void 0===e||e.focus())}),[p]);var b=null!==(t=null===(n=e.options.filter((function(t){return t.key===e.keyState}))[0])||void 0===n?void 0:n.value)&&void 0!==t?t:e.defaultSlectText;return Object(E.jsxs)("div",{className:"select-search",ref:j,onClick:function(){f(!p)},children:[Object(E.jsxs)("div",{className:"select-search-selected"+(p?" two-rounded":" all-rounded"),children:[Object(E.jsx)("div",{className:"select-search-selected-value",children:Object(E.jsx)("span",{children:b})}),Object(E.jsx)("div",{className:"select-search-selected-button"+(p?" down-arrow":" left-arrow")})]}),p&&Object(E.jsxs)("div",{className:"select-search-bar",children:[Object(E.jsxs)("div",{className:"input-box",children:[Object(E.jsx)("span",{children:Object(E.jsx)(R,{})}),Object(E.jsx)("input",{type:"text",onChange:function(e){return u(e.target.value)},ref:v,value:d})]}),e.options.filter((function(e){if(e.value.toLocaleLowerCase().includes(d.toLocaleLowerCase()))return e})).map((function(t){return Object(E.jsx)("div",{className:"select-search-option",onClick:function(){return e.onChange(t.key)},children:Object(E.jsx)("span",{children:t.value})},t.key)}))]})]})},Q=(n(33),function(e){var t="selected"===e.gnode.state,n="touched"===e.gnode.state,o="gnode";o+=t?" gnode--selected":e.gnode.visited?" gnode--visited":n?" gnode--touched":"";var a="gnode-inner";a+=e.isRoot?" gnode--root":e.isDestination?" gnode--destination":"";var c={left:e.gnode.pos.x-50,top:e.gnode.pos.y-50},s={};if("grouped"===e.gnode.state){var i,r,d=null!==(i=null===(r=e.gnode.group)||void 0===r?void 0:r.color)&&void 0!==i?i:[0,0,0,0];s.backgroundColor="rgba(".concat(d[0],",").concat(d[1],",").concat(d[2],",").concat(d[3],")")}return Object(E.jsx)("div",{className:o,style:c,onClick:function(){e.onClick(e.gnode)},children:Object(E.jsx)("div",{className:a,style:s,children:Object(E.jsx)("span",{className:"gnode-inner-content",children:e.gnode.data})})})}),A={updateNode:T},B=Object(d.b)((function(){return{}}),A)(a.a.memo(Q)),_=(n(34),Object(d.b)((function(e){return{nodes:e.NodeManager.graph.nodes}}),{})((function(e){var t="travel"===e.path.state?"var(--green)":"touched"===e.path.state?"var(--yello)":"warn"===e.path.state?"var(--red)":"var(--primary-darker)",n={stroke:t},o=e.nodes[e.path.sourceId].pos,a=e.nodes[e.path.destinationId].pos,c=function(e){return{x:e.x,y:-1*e.y}},s=c(function(e,t,n,o){var a=(o-t)/(n-e),c=t-a*e,s=1+a*a,i=2*(a*c-n-o*a),r=n*n+o*o+c*c-2*o*c-2500,d=Math.sqrt(i*i-4*s*r),u={x:0,y:0};u.x=(-i+d)/(2*s),u.y=u.x*a+c;var l={x:0,y:0};return l.x=(-i-d)/(2*s),l.y=l.x*a+c,Math.abs(u.x-e)+Math.abs(u.y-t)>Math.abs(l.x-e)+Math.abs(l.y-t)?l:u}(o.x,-1*o.y,a.x,-1*a.y)),i=(o.x+s.x)/2,r=(o.y+s.y)/2,d="",u={x:0,y:0},l=e.path.type;if("line"===l)d="M ".concat(o.x," ").concat(o.y," L ").concat(s.x," ").concat(s.y),u={x:i,y:r};else if("curve"===l){var h=c(function(e,t,n,o){var a=(o-t)/(n-e),c=.57735,s=-.57735,i=(a-c)/(1+c*a),r=(a-s)/(1+s*a);return function(e,t,n,o){var a=(o-t)/(e-n);return{x:a,y:e*a+t}}(i,t-i*e,r,o-r*n)}(o.x,-1*o.y,s.x,-1*s.y));d="M ".concat(o.x," ").concat(o.y," Q ").concat(h.x," ").concat(h.y," ").concat(s.x," ").concat(s.y),u={x:(h.x+i)/2,y:(h.y+r)/2}}else"self"===l||console.log("invalid type");return Object(E.jsxs)("div",{className:"path-wrapper",children:[Object(E.jsxs)("svg",{className:"path",width:"100%",height:"100%",children:[Object(E.jsx)("defs",{children:Object(E.jsx)("marker",{id:"".concat(e.path.id,"-arrowhead"),markerWidth:"10",markerHeight:"7",refX:"9.5",refY:"3.5",orient:"auto",children:Object(E.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:t})})}),Object(E.jsx)("path",{id:e.path.id,d:d,style:n,fill:"none",markerEnd:"url(#".concat(e.path.id,"-arrowhead)")})]}),Object(E.jsx)("span",{style:{position:"absolute",left:u.x,top:u.y,color:"var(--yellow)",fontSize:"20px"},children:e.path.weight})]})}))),q=[[64,249,155,1],[249,248,113,1],[15,8,75,1],[136,106,190,1],[0,219,203,1],[175,245,136,1],[252,126,139,1],[0,89,166,1],[149,74,0,1],[241,150,46,1],[38,64,139,1],[8,178,227,1]],F=(n(35),{addGnode:function(e){return{type:k,payload:{gnode:e}}},addPath:function(e){return{type:N,payload:{path:e}}},setRoot:function(e){return{type:C,payload:{nodeID:e}}},updateNode:T,unvisitAll:function(){return{type:w}},updatePath:function(e){return{type:S,payload:{updatedPath:e}}},setDestination:function(e){return{type:M,payload:{nodeID:e}}}}),G=Object(d.b)((function(e){return{nodeManager:e.NodeManager}}),F)((function(e){var t=Object(o.useState)(""),n=Object(r.a)(t,2),a=n[0],c=n[1],s=Object(o.useRef)(null),d=Object(o.useState)(0),l=Object(r.a)(d,2),h=l[0],p=l[1],f=Object(o.useState)(0),v=Object(r.a)(f,2),j=v[0],O=v[1],x=Object(o.useState)(null),k=Object(r.a)(x,2),m=k[0],N=k[1],C=Object(o.useState)(null),w=Object(r.a)(C,2),S=w[0],M=w[1],T=Object(o.useState)(!1),R=Object(r.a)(T,2),Q=R[0],A=R[1];Object(o.useEffect)((function(){S&&U(S)}),[S]);var F=Object(o.useCallback)((function(e){M(e)}),[]),G="line",H=function(t,n){if(n.id!==t.id){for(var o=e.nodeManager.graph.nodes[t.id].connections,c=0;c<o.length;c++){if(o[c].nodeID===n.id)return void console.log("Path already exists")}for(var s=e.nodeManager.graph.nodes[n.id].connections,i=0;i<s.length;i++){if(s[i].nodeID===t.id){G="curve";break}}var r,d,l,h,p=(r=t.id,d=n.id,l=G,h=parseInt(a),{id:Object(u.a)(),sourceId:r,destinationId:d,state:"default",type:l,weight:h||void 0});e.addPath(p)}else console.log("No self loops")},U=function(t){switch(h){case 1:if(!m)return N(t),void e.updateNode(Object(i.a)(Object(i.a)({},t),{},{state:"selected"}));H(m,t),function(){if(m){var t=e.nodeManager.graph.nodes[m.id];e.updateNode(Object(i.a)(Object(i.a)({},t),{},{state:"default"})),N(null)}}();break;case 2:e.nodeManager.graph.rootID!==t.id?e.setRoot(t.id):e.setRoot(void 0);break;case 3:e.nodeManager.graph.destinationID!==t.id?e.setDestination(t.id):e.setDestination(void 0)}M(null)};return Object(E.jsxs)("div",{className:"nodemanager",children:[Object(E.jsxs)("div",{className:"left-panel",children:[Object(E.jsx)("input",{type:"text",className:"left-panel-input small-box",value:a,onChange:function(e){return c(e.target.value)}}),Object(E.jsxs)("div",{className:"left-panel-selection",children:[Object(E.jsx)("span",{children:"mode :"}),Object(E.jsx)(L,{options:[{key:0,value:"Create Node"},{key:1,value:"Create Path"},{key:2,value:"Set Root"},{key:3,value:"Set Destination"}],defaultSlectText:"Select Mode",keyState:h,onChange:function(e){return p(e)}})]}),Object(E.jsxs)("div",{className:"left-panel-selection",children:[Object(E.jsx)("span",{children:"algorithm :"}),Object(E.jsx)(L,{options:[{key:0,value:"BFS"},{key:1,value:"DFS"},{key:2,value:"Dijkstra"},{key:3,value:"Group graph"},{key:4,value:"Bellmanford"}],defaultSlectText:"Select Mode",keyState:j,onChange:function(e){return O(e)}})]}),Object(E.jsx)("button",{className:"left-panel-start small-box",onClick:function(){switch(j){case 0:b(e.nodeManager.graph,e.updateNode);break;case 1:g(e.nodeManager.graph,e.updateNode);break;case 2:y(e.nodeManager.graph,e.updateNode,e.updatePath);break;case 3:I(e.nodeManager.graph,q,[234,252,255,1],e.updateNode);break;case 4:D(e.nodeManager.graph,e.updatePath)}},children:"start"}),Object(E.jsx)("button",{className:"small-box",onClick:function(){return e.unvisitAll()},children:"unvisit all"}),0===h&&Object(E.jsxs)("div",{className:"left-panel-checkbox-wrapper",children:[Object(E.jsx)("label",{htmlFor:"",children:"auto-increment"}),Object(E.jsx)(P,{isChecked:Q,onClick:function(){return A(!Q)}})]})]}),Object(E.jsxs)("div",{className:"right-panel",onClick:function(t){var n,o;if(0==h&&a){var i,r,d,l,p,f,v,j,b=parseInt(a),g=(n=b||a,o={x:t.pageX-(null!==(i=null===(r=s.current)||void 0===r?void 0:r.offsetLeft)&&void 0!==i?i:0)+(null!==(d=null===(l=s.current)||void 0===l?void 0:l.scrollLeft)&&void 0!==d?d:0),y:t.pageY-(null!==(p=null===(f=s.current)||void 0===f?void 0:f.offsetTop)&&void 0!==p?p:0)+(null!==(v=null===(j=s.current)||void 0===j?void 0:j.scrollTop)&&void 0!==v?v:0)},{id:Object(u.a)(),data:n,state:"default",visited:!1,connections:[],pos:o});e.addGnode(g),(0===b||b)&&Q&&c(b+1+"")}},ref:s,children:[Object.values(e.nodeManager.graph.nodes).map((function(t){return Object(E.jsx)(B,{gnode:t,_state:t.state+t.visited,onClick:F,isRoot:t.id===e.nodeManager.graph.rootID,isDestination:t.id===e.nodeManager.graph.destinationID},t.id)})),Object.values(e.nodeManager.graph.paths).map((function(e){return Object(E.jsx)(_,{path:e,_state:e.state},e.id)}))]})]})})),H=(n(36),function(){return Object(E.jsx)(G,{})}),U=n(5),J=n(17),V=n(18),W=n(8),X={graph:{nodes:{},paths:{}}},Y=Object(U.combineReducers)({NodeManager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,n=Object(i.a)({},e);switch(t.type){case k:var o=t.payload.gnode;return n.graph.nodes=Object(i.a)(Object(i.a)({},n.graph.nodes),{},Object(W.a)({},o.id,o)),n;case N:var a=t.payload.path;n.graph.paths=Object(i.a)(Object(i.a)({},n.graph.paths),{},Object(W.a)({},a.id,a));var c=n.graph.nodes[a.sourceId].connections;return n.graph.nodes[a.sourceId].connections=[].concat(Object(V.a)(c),[{nodeID:a.destinationId,pathID:a.id}]),n;case m:var s=t.payload.updatedNode,r=n.graph.nodes[s.id];return r?(n.graph.nodes[s.id]=Object(i.a)(Object(i.a)({},r),s),n):e;case S:var d=t.payload.updatedPath,u=n.graph.paths[d.id];return u?(n.graph.paths[d.id]=Object(i.a)(Object(i.a)({},u),d),n):e;case C:var l=t.payload.nodeID;return n.graph.rootID=l,n;case w:return Object.keys(n.graph.nodes).forEach((function(e){n.graph.nodes[e].visited=!1,n.graph.nodes[e].state="default"})),Object.keys(n.graph.paths).forEach((function(e){n.graph.paths[e].state="default"})),n;case M:var h=t.payload.nodeID;return n.graph.destinationID=h,n;default:return e}}}),Z=Object(U.createStore)(Y,Object(J.composeWithDevTools)());n(37),n(38);s.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(d.a,{store:Z,children:Object(E.jsx)(H,{})})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.4c4ffaf1.chunk.js.map