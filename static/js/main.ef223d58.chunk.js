/*! For license information please see main.ef223d58.chunk.js.LICENSE.txt */
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(9),i=n.n(r),c=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),r(e),i(e)}))},s=n(11),u=n(6),d=n(38),l=n(4),p=n(5),h=function(){function e(){Object(l.a)(this,e),this.queue=void 0,this.queue=[]}return Object(p.a)(e,[{key:"front",value:function(){if(0!==this.queue.length)return this.queue[0]}},{key:"pop",value:function(){return this.queue.shift()}},{key:"push",value:function(e){this.queue.push(e)}},{key:"empty",value:function(){return 0===this.queue.length}}]),e}(),f=function(){function e(){Object(l.a)(this,e),this.stack=void 0,this.stack=[]}return Object(p.a)(e,[{key:"top",value:function(){if(0!==this.stack.length)return this.stack[0]}},{key:"pop",value:function(){return this.stack.shift()}},{key:"push",value:function(e){this.stack.unshift(e)}},{key:"empty",value:function(){return 0===this.stack.length}}]),e}();function v(e,t){return e<=t}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;Object(l.a)(this,e),this.pQueue=void 0,this.compare=void 0,this.pQueue=[],this.compare=t}return Object(p.a)(e,[{key:"getPos",value:function(e,t,n){for(;t<=n;){if(t===n)return this.compare(e,this.pQueue[t])?t:t+1;var o=Math.floor((t+n)/2);this.compare(e,this.pQueue[o])?n=o-1:t=o+1}return 0}},{key:"front",value:function(){if(0!==this.pQueue.length)return this.pQueue[0]}},{key:"pop",value:function(){return this.pQueue.shift()}},{key:"push",value:function(e){var t=this.getPos(e,0,this.pQueue.length-1);this.pQueue.splice(t,0,e)}},{key:"empty",value:function(){return 0===this.pQueue.length}}]),e}(),j=n(2),b=function(e){var t=Object(j.a)({},e);return t.visited=!0,t},O=function(e,t){if(e.rootID){console.log("Starting BFS");var n=new h;n.push(e.rootID);for(var o={},a=0,r=function(){var r=n.pop();console.log(r);var i=e.nodes[r];o[i.id]=!0,setTimeout((function(){t(b(i))}),a),a+=300,e.nodes[i.id].connections.forEach((function(e){o[e.nodeID]||n.push(e.nodeID)}))};!n.empty();)r();console.log("BFS finished")}else console.log("Root is not set")},D=function(e,t){if(e.rootID){console.log("Starting DFS");var n=new f;n.push(e.rootID);for(var o={},a=0,r=function(){var r=n.pop();console.log(r);var i=e.nodes[r];o[i.id]=!0,setTimeout((function(){t(b(i))}),a),a+=300,e.nodes[i.id].connections.forEach((function(e){o[e.nodeID]||n.push(e.nodeID)}))};!n.empty();)r();console.log("DFS finished")}else console.log("Root is not set")},I=function(e,t,n){if(e.rootID){console.log("Starting Dijkstra");var o={},a={},r=new g((function(e,t){return e.cost>=t.cost})),i={};i[e.rootID]={pathID:null,parentID:null},Object.values(e.nodes).forEach((function(e){o[e.id]=1/0})),o[e.rootID]=0,r.push({cost:0,nodeID:e.rootID});for(var c=0,s=function(){var n=r.pop();console.log(n.nodeID);var s=e.nodes[n.nodeID];a[n.nodeID]=!0,setTimeout((function(){t(b(s))}),c),c+=300,e.nodes[n.nodeID].connections.forEach((function(t){var c,s=null!==(c=e.paths[t.pathID].weight)&&void 0!==c?c:10;!a[t.nodeID]&&o[t.nodeID]>n.cost+s&&(console.log("here"),o[t.nodeID]=n.cost+s,r.push({cost:o[t.nodeID],nodeID:t.nodeID}),i[t.nodeID]={parentID:n.nodeID,pathID:t.pathID})}))};!r.empty();)s();if(console.log(i),e.destinationID)for(var u=e.destinationID,d=function(){var t=i[u];if(!t)return console.log("Can't reach ",u),"break";setTimeout((function(){t.pathID?n(function(e){var t=Object(j.a)({},e);return t.state="travel",t}(e.paths[t.pathID])):console.log(t," ERROR pathID empty")}),c),c+=300,u=t.parentID};u;){if("break"===d())break}console.log(o),console.log("Dijkstra finished")}else console.log("Root is not set")},y="ADD_NODE",k="UPDATE_NODE",m="ADD_PATH",x="SET_ROOT",N="UNVISIT_ALL",P="UPDATE_PATH",S="SET_DESTINATION",T=function(e){return{type:k,payload:{updatedNode:e}}},C=(n(30),n(1)),E=function(e){var t="selected"===e.gnode.state?"var(--yellow)":e.gnode.visited?"var(--green)":"var(--primary)",n={left:e.gnode.pos.x,top:e.gnode.pos.y,backgroundColor:t};return Object(C.jsx)("div",{className:"gnode",style:n,onClick:function(){e.onNodeSelect(e.gnode)},children:Object(C.jsx)("div",{className:"gnode-inner",children:Object(C.jsx)("span",{className:"gnode-inner-content",children:e.gnode.data})})})},M={updateNode:T},R=(Object(u.b)((function(){return{}}),M)(E),n(32),function(e){var t={stroke:"travel"===e.path.state?"var(--green)":"var(--primary-darker)"};return Object(C.jsx)("svg",{className:"path",width:"100%",height:"100%",children:Object(C.jsx)("line",{x1:e.path.sourcePos.x+50,y1:e.path.sourcePos.y+50,x2:e.path.destinationPos.x+50,y2:e.path.destinationPos.y+50,style:t})})}),w=(n(33),{addGnode:function(e){return{type:y,payload:{gnode:e}}},addPath:function(e){return{type:m,payload:{path:e}}},setRoot:function(e){return{type:x,payload:{nodeID:e}}},updateNode:T,unvisitAll:function(){return{type:N}},updatePath:function(e){return{type:P,payload:{updatedPath:e}}},setDestination:function(e){return{type:S,payload:{nodeID:e}}}}),A=Object(u.b)((function(e){return{nodeManager:e.NodeManager}}),w)((function(e){var t=Object(o.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)(0),c=Object(s.a)(i,2),u=c[0],l=c[1],p=Object(o.useRef)(null),h=Object(o.useState)(null),f=Object(s.a)(h,2),v=f[0],g=f[1],j=function(){if(v){var t=e.nodeManager.graph.nodes[v.id];t.state="default",e.updateNode(t),g(null)}},b=function(t){if(!v)return g(t),t.state="selected",void e.updateNode(t);if(t.id===v.id)return console.log("No self loops"),void j();for(var n=e.nodeManager.graph.nodes[v.id].connections,o=0;o<n.length;o++){if(n[o].nodeID===t.id)return console.log("Path already exists"),void j()}var a,r,i=(a=v,r=t,{id:Object(d.a)(),sourceId:a.id,destinationId:r.id,sourcePos:a.pos,destinationPos:r.pos,state:"default"});e.addPath(i),j()},y=function(t){switch(u){case 1:b(t);break;case 2:e.setRoot(t.id);break;case 3:e.setDestination(t.id)}};return Object(C.jsxs)("div",{className:"nodemanager",children:[Object(C.jsxs)("div",{className:"left-panel",children:[Object(C.jsx)("input",{type:"text",value:a,onChange:function(e){return r(e.target.value)}}),Object(C.jsx)("button",{onClick:function(){return l(0)},children:"create node"}),Object(C.jsx)("button",{onClick:function(){return l(1)},children:"create path"}),Object(C.jsx)("button",{onClick:function(){return l(2)},children:"set root"}),Object(C.jsx)("button",{onClick:function(){return l(3)},children:"set destination"}),Object(C.jsx)("button",{onClick:function(){return e.unvisitAll()},children:"unvisit all"}),Object(C.jsx)("button",{onClick:function(){return O(e.nodeManager.graph,e.updateNode)},children:"bfs"}),Object(C.jsx)("button",{onClick:function(){return D(e.nodeManager.graph,e.updateNode)},children:"dfs"}),Object(C.jsx)("button",{onClick:function(){return I(e.nodeManager.graph,e.updateNode,e.updatePath)},children:"dijkstra"})]}),Object(C.jsxs)("div",{className:"right-panel",onClick:function(t){var n,o;if(0==u&&a){var r,i,c,s,l,h,f,v,g=parseInt(a);if(!g)return;var j=(n=g,o={x:t.pageX-(null!==(r=null===(i=p.current)||void 0===i?void 0:i.offsetLeft)&&void 0!==r?r:0)-50+(null!==(c=null===(s=p.current)||void 0===s?void 0:s.scrollLeft)&&void 0!==c?c:0),y:t.pageY-(null!==(l=null===(h=p.current)||void 0===h?void 0:h.offsetTop)&&void 0!==l?l:0)-50+(null!==(f=null===(v=p.current)||void 0===v?void 0:v.scrollTop)&&void 0!==f?f:0)},{id:Object(d.a)(),data:n,state:"default",visited:!1,connections:[],pos:o});e.addGnode(j)}},ref:p,children:[Object.values(e.nodeManager.graph.nodes).map((function(e){return Object(C.jsx)(E,{gnode:e,onNodeSelect:y,updateNode:T},e.id)})),Object.values(e.nodeManager.graph.paths).map((function(e){return Object(C.jsx)(R,{path:e},e.id)}))]})]})})),Q=(n(34),function(){return Object(C.jsx)(A,{})}),F=n(3),q=n(17),_=n(18),L=n(8),B={graph:{nodes:{},paths:{}}},U=Object(F.combineReducers)({NodeManager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,n=Object(j.a)({},e);switch(t.type){case y:var o=t.payload.gnode;return n.graph.nodes=Object(j.a)(Object(j.a)({},n.graph.nodes),{},Object(L.a)({},o.id,o)),n;case m:var a=t.payload.path;n.graph.paths=Object(j.a)(Object(j.a)({},n.graph.paths),{},Object(L.a)({},a.id,a));var r=n.graph.nodes[a.sourceId].connections;return n.graph.nodes[a.sourceId].connections=[].concat(Object(_.a)(r),[{nodeID:a.destinationId,pathID:a.id}]),n;case k:var i=t.payload.updatedNode,c=n.graph.nodes[i.id];return c?(n.graph.nodes[i.id]=Object(j.a)(Object(j.a)({},c),i),n):e;case P:var s=t.payload.updatedPath,u=n.graph.paths[s.id];return u?(n.graph.paths[s.id]=Object(j.a)(Object(j.a)({},u),s),n):e;case x:var d=t.payload.nodeID;return n.graph.nodes[d]?(n.graph.rootID=d,n):e;case N:return Object.keys(n.graph.nodes).forEach((function(e){n.graph.nodes[e].visited=!1})),n;case S:var l=t.payload.nodeID;return n.graph.nodes[l]?(n.graph.destinationID=l,n):e;default:return e}}}),G=Object(F.createStore)(U,Object(q.composeWithDevTools)());n(35),n(36);i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(u.a,{store:G,children:Object(C.jsx)(Q,{})})}),document.getElementById("root")),c(console.log)}},[[37,1,2]]]);
//# sourceMappingURL=main.ef223d58.chunk.js.map